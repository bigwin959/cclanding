<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPL Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 min-h-screen p-8">

    <div class="max-w-4xl mx-auto">
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">BPL Match Managers</h1>
            <a href="index.html" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">View
                Site</a>
        </header>

        <!-- Hero Section Editor -->
        <div class="bg-indigo-50 border border-indigo-200 rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-bold text-indigo-800 mb-4">üèÜ Edit Hero Section</h2>
            <form id="heroForm" class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Hero Title</label>
                    <input type="text" id="heroTitle" class="w-full border rounded p-2"
                        placeholder="e.g. BANGLADESH PREMIER LEAGUE">
                </div>

                <div class="border-t pt-2 mt-2">
                    <h3 class="font-bold text-gray-800 mb-2">üîñ Navbar Settings</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Icon Class (<a
                                    href="https://fontawesome.com/search" target="_blank"
                                    class="text-blue-500 underline">FontAwesome</a>)</label>
                            <input type="text" id="navIconClass" class="w-full border rounded p-2"
                                placeholder="e.g. fa-solid fa-trophy">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Navbar Background Color</label>
                            <div class="flex gap-2">
                                <input type="color" id="navBackgroundColorPicker"
                                    class="h-10 w-10 border rounded cursor-pointer"
                                    onchange="document.getElementById('navBackgroundColor').value = this.value">
                                <input type="text" id="navBackgroundColor" class="w-full border rounded p-2"
                                    placeholder="#1e293b"
                                    oninput="document.getElementById('navBackgroundColorPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Navbar Title HTML</label>
                            <input type="text" id="navTitleHTML" class="w-full border rounded p-2"
                                placeholder="e.g. BPL<span class='text-green'>2026</span>">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">Page Background Color</label>
                            <div class="flex gap-2">
                                <input type="color" id="bodyBackgroundColorPicker"
                                    class="h-10 w-10 border rounded cursor-pointer"
                                    onchange="document.getElementById('bodyBackgroundColor').value = this.value">
                                <input type="text" id="bodyBackgroundColor" class="w-full border rounded p-2"
                                    placeholder="#0f172a"
                                    oninput="document.getElementById('bodyBackgroundColorPicker').value = this.value">
                            </div>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-bold text-gray-700 mb-1">Sign Up/Login Link (Live
                                Section)</label>
                            <input type="text" id="liveSectionLink" class="w-full border rounded p-2"
                                placeholder="https://...">
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Promo Code</label>
                    <input type="text" id="promoCode" class="w-full border rounded p-2" placeholder="e.g. BPL2026">
                </div>


                <div class="border-t pt-2 mt-2">
                    <h3 class="font-bold text-gray-800 mb-2">üéÅ Bonus Section</h3>
                    <div class="mb-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Bonus Title</label>
                        <input type="text" id="bonusTitle" class="w-full border rounded p-2"
                            placeholder="e.g. üéÅ WELCOME BONUS">
                    </div>
                    <div class="mb-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Bonus Description (HTML
                            Allowed)</label>
                        <textarea id="bonusDesc" class="w-full border rounded p-2 h-20 text-xs font-mono"
                            placeholder="Deposit <span>...</span>"></textarea>
                    </div>
                    <div class="mb-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Button Text</label>
                        <input type="text" id="bonusButtonText" class="w-full border rounded p-2"
                            placeholder="e.g. CLAIM 100% BONUS NOW">
                    </div>
                    <div class="mb-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Button Link</label>
                        <input type="text" id="bonusButtonLink" class="w-full border rounded p-2"
                            placeholder="e.g. https://example.com">
                    </div>
                    <div class="mb-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Bonus Gradient Colors</label>
                        <div class="grid grid-cols-2 gap-4 mt-1">
                            <div>
                                <label class="text-[10px] text-gray-500 block">Start Color</label>
                                <div class="flex gap-1">
                                    <input type="color" id="bonusGradientStartPicker"
                                        class="h-8 w-8 border rounded cursor-pointer"
                                        onchange="document.getElementById('bonusGradientStart').value = this.value">
                                    <input type="text" id="bonusGradientStart" class="w-full border rounded p-1 text-xs"
                                        placeholder="#064e3b"
                                        oninput="document.getElementById('bonusGradientStartPicker').value = this.value">
                                </div>
                            </div>
                            <div>
                                <label class="text-[10px] text-gray-500 block">End Color</label>
                                <div class="flex gap-1">
                                    <input type="color" id="bonusGradientEndPicker"
                                        class="h-8 w-8 border rounded cursor-pointer"
                                        onchange="document.getElementById('bonusGradientEnd').value = this.value">
                                    <input type="text" id="bonusGradientEnd" class="w-full border rounded p-1 text-xs"
                                        placeholder="#0f172a"
                                        oninput="document.getElementById('bonusGradientEndPicker').value = this.value">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-2">
                    <label class="block text-sm font-bold text-gray-700 mb-1">Bonus Colors</label>
                    <div class="grid grid-cols-2 gap-4 mt-1">
                        <div>
                            <label class="text-[10px] text-gray-500 block">Title Color</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusTitleColorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusTitleColor').value = this.value">
                                <input type="text" id="bonusTitleColor" class="w-full border rounded p-1 text-xs"
                                    placeholder="#ffffff"
                                    oninput="document.getElementById('bonusTitleColorPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] text-gray-500 block">Desc/Text Color</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusDescColorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusDescColor').value = this.value">
                                <input type="text" id="bonusDescColor" class="w-full border rounded p-1 text-xs"
                                    placeholder="#cbd5e1"
                                    oninput="document.getElementById('bonusDescColorPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] text-gray-500 block">Accent Color (Highlights)</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusAccentColorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusAccentColor').value = this.value">
                                <input type="text" id="bonusAccentColor" class="w-full border rounded p-1 text-xs"
                                    placeholder="#facc15"
                                    oninput="document.getElementById('bonusAccentColorPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] text-gray-500 block">Button Text Color</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusButtonTextColorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusButtonTextColor').value = this.value">
                                <input type="text" id="bonusButtonTextColor" class="w-full border rounded p-1 text-xs"
                                    placeholder="#000000"
                                    oninput="document.getElementById('bonusButtonTextColorPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] text-gray-500 block">Btn Gradient Start</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusButtonGradientStartPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusButtonGradientStart').value = this.value">
                                <input type="text" id="bonusButtonGradientStart"
                                    class="w-full border rounded p-1 text-xs" placeholder="#F59E0B"
                                    oninput="document.getElementById('bonusButtonGradientStartPicker').value = this.value">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] text-gray-500 block">Btn Gradient End</label>
                            <div class="flex gap-1">
                                <input type="color" id="bonusButtonGradientEndPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('bonusButtonGradientEnd').value = this.value">
                                <input type="text" id="bonusButtonGradientEnd" class="w-full border rounded p-1 text-xs"
                                    placeholder="#D97706"
                                    oninput="document.getElementById('bonusButtonGradientEndPicker').value = this.value">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="border-t pt-4 mt-2">
                    <h3 class="font-bold text-gray-800 mb-2">üì± Social Contact Links</h3>
                    <div id="socialContactsAdmin" class="space-y-4">
                        <!-- 3 slots for social contacts -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-2 p-3 bg-white border rounded shadow-sm">
                            <input type="text" id="social_0_name" class="border rounded p-2 text-xs"
                                placeholder="App Name">
                            <input type="text" id="social_0_link" class="border rounded p-2 text-xs"
                                placeholder="URL Link">
                            <input type="text" id="social_0_icon" class="border rounded p-2 text-xs"
                                placeholder="Icon Class">
                            <div class="flex gap-1 items-center">
                                <input type="color" id="social_0_colorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('social_0_color').value = this.value">
                                <input type="text" id="social_0_color" class="w-full border rounded p-1 text-xs"
                                    placeholder="#ffffff"
                                    oninput="document.getElementById('social_0_colorPicker').value = this.value">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-2 p-3 bg-white border rounded shadow-sm">
                            <input type="text" id="social_1_name" class="border rounded p-2 text-xs"
                                placeholder="App Name">
                            <input type="text" id="social_1_link" class="border rounded p-2 text-xs"
                                placeholder="URL Link">
                            <input type="text" id="social_1_icon" class="border rounded p-2 text-xs"
                                placeholder="Icon Class">
                            <div class="flex gap-1 items-center">
                                <input type="color" id="social_1_colorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('social_1_color').value = this.value">
                                <input type="text" id="social_1_color" class="w-full border rounded p-1 text-xs"
                                    placeholder="#ffffff"
                                    oninput="document.getElementById('social_1_colorPicker').value = this.value">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-2 p-3 bg-white border rounded shadow-sm">
                            <input type="text" id="social_2_name" class="border rounded p-2 text-xs"
                                placeholder="App Name">
                            <input type="text" id="social_2_link" class="border rounded p-2 text-xs"
                                placeholder="URL Link">
                            <input type="text" id="social_2_icon" class="border rounded p-2 text-xs"
                                placeholder="Icon Class">
                            <div class="flex gap-1 items-center">
                                <input type="color" id="social_2_colorPicker"
                                    class="h-8 w-8 border rounded cursor-pointer"
                                    onchange="document.getElementById('social_2_color').value = this.value">
                                <input type="text" id="social_2_color" class="w-full border rounded p-1 text-xs"
                                    placeholder="#ffffff"
                                    oninput="document.getElementById('social_2_colorPicker').value = this.value">
                            </div>
                        </div>
                    </div>
                </div>


                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Hero Image URL</label>
                    <input type="text" id="heroImage" class="w-full border rounded p-2" placeholder="Image URL"
                        oninput="document.getElementById('heroImagePreview').src = this.value; document.getElementById('heroImagePreview').classList.remove('hidden');">
                    <img id="heroImagePreview" src="" class="mt-2 h-32 object-cover rounded shadow hidden"
                        onerror="this.classList.add('hidden')">
                </div>
                <button type="submit"
                    class="bg-indigo-600 text-white font-bold py-2 px-4 rounded hover:bg-indigo-700 transition w-full md:w-auto">
                    Update Hero Section
                </button>
            </form>
        </div>

        <!-- Fetch Online Section Removed -->

        <!-- Add/Edit Form Removed -->

        <!-- Match List Removed -->
    </div>

    <script>
        // Match Management Logic Removed

        // Fetch Online Logic Removed

        // Default Date Picker Logic
        window.onload = () => {
            // loadMatches(); // Removed
            loadHeroData();
        };

        // Hero Data Logic
        async function loadHeroData() {
            try {
                const res = await fetch('hero_data.json');
                const data = await res.json();
                if (data) {
                    document.getElementById('heroTitle').value = data.title || '';
                    document.getElementById('navIconClass').value = data.navIconClass || '';

                    document.getElementById('navTitleHTML').value = data.navTitleHTML || '';
                    document.getElementById('navBackgroundColor').value = data.navBackgroundColor || '#1e293b';
                    document.getElementById('navBackgroundColorPicker').value = data.navBackgroundColor || '#1e293b';
                    document.getElementById('bodyBackgroundColor').value = data.bodyBackgroundColor || '#0f172a';
                    document.getElementById('bodyBackgroundColorPicker').value = data.bodyBackgroundColor || '#0f172a';
                    document.getElementById('liveSectionLink').value = data.liveSectionLink || '';
                    document.getElementById('promoCode').value = data.promoCode || '';
                    document.getElementById('bonusTitle').value = data.bonusTitle || '';
                    document.getElementById('bonusDesc').value = data.bonusDesc || '';
                    document.getElementById('bonusButtonText').value = data.bonusButtonText || '';
                    document.getElementById('bonusButtonLink').value = data.bonusButtonLink || '';
                    document.getElementById('bonusGradientStart').value = data.bonusGradientStart || '#064e3b';
                    document.getElementById('bonusGradientStartPicker').value = data.bonusGradientStart || '#064e3b';
                    document.getElementById('bonusGradientEnd').value = data.bonusGradientEnd || '#0f172a';
                    document.getElementById('bonusGradientEndPicker').value = data.bonusGradientEnd || '#0f172a';

                    document.getElementById('bonusTitleColor').value = data.bonusTitleColor || '#ffffff';
                    document.getElementById('bonusTitleColorPicker').value = data.bonusTitleColor || '#ffffff';
                    document.getElementById('bonusDescColor').value = data.bonusDescColor || '#cbd5e1';
                    document.getElementById('bonusDescColorPicker').value = data.bonusDescColor || '#cbd5e1';
                    document.getElementById('bonusAccentColor').value = data.bonusAccentColor || '#facc15';
                    document.getElementById('bonusAccentColorPicker').value = data.bonusAccentColor || '#facc15';
                    document.getElementById('bonusButtonTextColor').value = data.bonusButtonTextColor || '#000000';
                    document.getElementById('bonusButtonTextColorPicker').value = data.bonusButtonTextColor || '#000000';
                    document.getElementById('bonusButtonGradientStart').value = data.bonusButtonGradientStart || '#F59E0B';
                    document.getElementById('bonusButtonGradientStartPicker').value = data.bonusButtonGradientStart || '#F59E0B';
                    document.getElementById('bonusButtonGradientEnd').value = data.bonusButtonGradientEnd || '#D97706';
                    document.getElementById('bonusButtonGradientEndPicker').value = data.bonusButtonGradientEnd || '#D97706';

                    if (data.socialContacts && data.socialContacts.length > 0) {
                        data.socialContacts.forEach((sc, i) => {
                            if (i < 3) {
                                document.getElementById(`social_${i}_name`).value = sc.name || '';
                                document.getElementById(`social_${i}_link`).value = sc.link || '';
                                document.getElementById(`social_${i}_icon`).value = sc.icon || '';
                                document.getElementById(`social_${i}_color`).value = sc.color || '#ffffff';
                                document.getElementById(`social_${i}_colorPicker`).value = sc.color || '#ffffff';
                            }
                        });
                    }
                    document.getElementById('heroImage').value = data.imageUrl || '';
                    if (data.imageUrl) {
                        const preview = document.getElementById('heroImagePreview');
                        preview.src = data.imageUrl;
                        preview.classList.remove('hidden');
                    }
                }
            } catch (err) {
                console.error("Error loading hero data:", err);
            }
        }

        document.getElementById('heroForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                title: document.getElementById('heroTitle').value,
                navIconClass: document.getElementById('navIconClass').value,

                navTitleHTML: document.getElementById('navTitleHTML').value,
                navBackgroundColor: document.getElementById('navBackgroundColor').value,
                bodyBackgroundColor: document.getElementById('bodyBackgroundColor').value,
                liveSectionLink: document.getElementById('liveSectionLink').value,
                promoCode: document.getElementById('promoCode').value,
                bonusTitle: document.getElementById('bonusTitle').value,
                bonusDesc: document.getElementById('bonusDesc').value,
                bonusButtonText: document.getElementById('bonusButtonText').value,
                bonusButtonLink: document.getElementById('bonusButtonLink').value,
                bonusGradientStart: document.getElementById('bonusGradientStart').value,
                bonusGradientEnd: document.getElementById('bonusGradientEnd').value,
                bonusTitleColor: document.getElementById('bonusTitleColor').value,
                bonusDescColor: document.getElementById('bonusDescColor').value,
                bonusAccentColor: document.getElementById('bonusAccentColor').value,
                bonusButtonTextColor: document.getElementById('bonusButtonTextColor').value,
                bonusButtonGradientStart: document.getElementById('bonusButtonGradientStart').value,
                bonusButtonGradientEnd: document.getElementById('bonusButtonGradientEnd').value,
                socialContacts: [
                    {
                        name: document.getElementById('social_0_name').value,
                        link: document.getElementById('social_0_link').value,
                        icon: document.getElementById('social_0_icon').value,
                        color: document.getElementById('social_0_color').value
                    },
                    {
                        name: document.getElementById('social_1_name').value,
                        link: document.getElementById('social_1_link').value,
                        icon: document.getElementById('social_1_icon').value,
                        color: document.getElementById('social_1_color').value
                    },
                    {
                        name: document.getElementById('social_2_name').value,
                        link: document.getElementById('social_2_link').value,
                        icon: document.getElementById('social_2_icon').value,
                        color: document.getElementById('social_2_color').value
                    }
                ],
                imageUrl: document.getElementById('heroImage').value
            };

            try {
                // Check valid environment
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    // Local Environment: Use standard API
                    const res = await fetch('/api/hero', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    if (res.ok) alert('Hero section updated! Changes will appear on reload.');
                } else {
                    // Netlify Live Environment
                    try {
                        const directSaveRes = await fetch('/.netlify/functions/save-data', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ heroData: data }) // Sending heroData
                        });

                        const directSaveData = await directSaveRes.json();

                        if (directSaveRes.ok && directSaveData.success) {
                            alert("‚úÖ HERO SECTON SAVED!\n\nNetlify is rebuilding the site. Changes will appear in ~1 minute.");
                        } else {
                            throw new Error(directSaveData.error || "Unknown Error");
                        }
                    } catch (directError) {
                        console.warn("Direct save failed, falling back to clipboard:", directError);
                        const jsonStr = JSON.stringify(data, null, 4);
                        await navigator.clipboard.writeText(jsonStr);
                        const confirmAction = confirm(
                            "‚ö†Ô∏è Direct Save Failed (Token missing?).\n\n" +
                            "I have copied the HERO DATA to your clipboard.\n\n" +
                            "Click OK to open GitHub, then PASTE the data manually into hero_data.json."
                        );
                        if (confirmAction) {
                            window.open("https://github.com/bigwin959/cclanding/edit/main/hero_data.json", "_blank");
                        }
                    }
                }
            } catch (err) {
                console.error(err);
                alert('Error updating hero section');
            }
        });
    </script>
</body>

</html>